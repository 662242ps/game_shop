<app-header role="admin"></app-header>

<main class="users-bg">
  <section class="panel">
    <div class="panel-head">
      <h1 class="title-3d">
        ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ {{ filtered().length }} ‡∏Ñ‡∏ô
      </h1>

      <label class="search-box" aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤">
        <input
          type="search"
          [ngModel]="q()"
          (ngModelChange)="q.set($event)"
          placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤"
        />
        <span class="icon-search" aria-hidden="true"></span>
      </label>
    </div>

    <div class="grid" *ngIf="!loading(); else loadingTpl">
      <article class="user-card"
               *ngFor="let u of filtered()"
               [routerLink]="['/admin/users', userId(u)]"  
               role="link"
               tabindex="0">
        <div class="avatar-wrap">
          <img *ngIf="avatar(u)" [src]="avatar(u)!" (error)="onImgError($event)" alt="{{u.username}}">
          <div class="avatar-fallback" aria-hidden="true">üë§</div>
        </div>

        <div class="meta">
          <div class="name">‡∏ä‡∏∑‡πà‡∏≠ {{ u.username }}</div>
          <div class="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• {{ u.email }}</div>
        </div>
      </article>

      <p class="empty" *ngIf="filtered().length === 0">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>
    </div>

    <ng-template #loadingTpl>
      <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‚Ä¶</div>
    </ng-template>
  </section>
</main>
